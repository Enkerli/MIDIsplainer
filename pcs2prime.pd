#N canvas 0 22 932 573 8;
#X declare -stdpath ./;
#X obj 1596 48 declare -stdpath ./;
#X text 1938 160 0 Take any Pitch Class Set (PCS);
#X obj 1707 165 inlet Pitch Class Set;
#X obj 1392 45 text define -k pcs2cmpct;
#A set 9.0805e+06 \; 1.10803e+07 \; 9.0401e+06 \; 7.0403e+06 \;;
#X obj 5 7 pcscircle;
#X obj 1710 586 iterate;
#X obj 1834 981 zl stream;
#X obj 1710 637 counter 0 0 12, f 20;
#X msg 1600 263 0 2 4 7;
#X obj 1710 609 bng 25 250 50 0 empty empty empty 17 7 0 10 #e4e4e4 #4d4d4d #373737;
#X msg 1482 262 0 4 7;
#X obj 1863 1171 rotate;
#X obj 1779 1125 list store;
#X msg 1513 259 0 2 8 10;
#X obj 1705 357 t l l b l b;
#X obj 1883 411 s \$0-clearset;
#X obj 5 -113 r \$0-clearset;
#X obj 1756 441 s \$0-opcs;
#X obj 44 -69 r \$0-opcs;
#X obj 1891 1225 s \$0-cpcs;
#X obj 158 7 pcscircle;
#X obj 158 -113 r \$0-clearset;
#X obj 211 -63 r \$0-cpcs;
#X msg 1592 230 7 0 3 4;
#X obj 1866 867 r \$0-opcs;
#X obj 1813 480 r \$0-opcs;
#X obj 311 7 pcscircle;
#X obj 311 -113 r \$0-clearset;
#X obj 1815 556 s \$0-ipcs;
#X obj 364 -63 r \$0-ipcs;
#X obj 1927 359 bng 25 250 50 0 empty empty empty 17 7 0 10 #e4e4e4 #4d4d4d #373737;
#X obj 1874 953 list length;
#N canvas 733 172 450 300 pcsinvert 0;
#X obj 1551 667 iterate;
#X obj 1553 712 !- 12;
#X obj 1551 741 % 12;
#X obj 1551 810 zl sort;
#X obj 1607 699 list length;
#X obj 1554 588 t l l;
#X obj 1550 771 zl stream;
#X obj 1553 549 inlet;
#X obj 1551 863 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 8 0;
#X connect 4 0 6 1;
#X connect 5 0 0 0;
#X connect 5 1 4 0;
#X connect 6 0 3 0;
#X connect 7 0 5 0;
#X restore 1814 517 pd pcsinvert;
#X obj 1871 1056 t b f;
#X obj 464 7 pcscircle;
#X obj 464 -113 r \$0-clearset;
#X obj 517 -63 r \$0-cipcs;
#X obj 1710 663 s \$0-rotnum;
#X obj 1773 869 r \$0-rotnum;
#X obj 1491 980 zl stream;
#X obj 1518 1163 rotate;
#X obj 1504 1123 list store;
#X obj 1582 943 list length;
#X obj 1531 1064 t b f;
#X obj 1492 861 r \$0-rotnum;
#X obj 1583 861 r \$0-ipcs;
#X obj 1575 1089 r \$0-ipcs;
#X obj 1436 1207 s \$0-cipcs;
#X obj 1491 1022 minimum;
#X obj 1835 1020 minimum;
#X obj 1657 1257 buddy;
#X obj 1664 1288 -;
#X obj 1663 1329 moses;
#X obj 1664 1445 buddy;
#X obj 1604 1487 list store;
#X obj 1729 1492 list store;
#X obj 1662 1373 bng 25 250 50 0 empty empty empty 17 7 0 10 #e4e4e4 #4d4d4d #373737;
#X obj 1689 1373 bng 25 250 50 0 empty empty empty 17 7 0 10 #e4e4e4 #4d4d4d #373737;
#X obj 1662 1546 s \$0-mcpcs;
#X obj 617 7 pcscircle;
#X obj 617 -113 r \$0-clearset;
#X obj 670 -63 r \$0-mcpcs;
#X obj 1816 1095 r \$0-opcs;
#X msg 1492 228 0 1 4 5 6 7 10;
#X obj 10 299 pcscircle;
#X obj 12 221 r \$0-clearset;
#X obj 27 246 r \$0-opcs;
#X obj 163 299 pcscircle;
#X obj 165 221 r \$0-clearset;
#X obj 198 246 r \$0-cpcs;
#X obj 316 299 pcscircle;
#X obj 318 221 r \$0-clearset;
#X obj 341 246 r \$0-ipcs;
#X obj 469 299 pcscircle;
#X obj 471 221 r \$0-clearset;
#X obj 495 246 r \$0-cipcs;
#X obj 622 299 pcscircle;
#X obj 624 221 r \$0-clearset;
#X obj 2182 730 r \$0-mcpcs;
#X obj 2182 766 pcs2root;
#X obj 2183 1006 s \$0-prime;
#X obj 641 246 r \$0-mcpcs;
#X obj 2181 864 unite empty;
#X obj 2181 912 format (%s);
#X msg 1470 294 4 5 6 9 10;
#X msg 1484 323 1 4 5 6 9;
#X text 1678 228 Test Sets;
#X text 1787 835 Original PCS;
#X text 1494 833 Inverted PCS;
#N canvas 733 172 450 300 dec2twelve 0;
#X obj 1677 1620 iterate;
#X obj 1677 1530 inlet;
#X obj 1680 1841 outlet;
#X obj 1678 1678 sel 10 11;
#X msg 1680 1726 T;
#X obj 1678 1776 zl stream;
#X msg 1704 1726 E;
#X obj 1677 1586 t l l;
#X obj 1750 1626 list length;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 3 0 4 0;
#X connect 3 1 6 0;
#X connect 3 2 5 0 32.................IA....9+++eR....f+++++D....;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 5 0;
#X connect 7 0 0 0;
#X connect 7 1 8 0 32.................K....3C...vB....9....TA....;
#X connect 8 0 5 1 32.................BA...D9+++uP....g++++OH....;
#X restore 2182 811 pd dec2twelve;
#X msg 1562 303 0 1 2 3 4 5 6 7 8 9 10 11;
#X msg 1757 275 0 2 3 4 5 6 7 8 9 10 11;
#X text 2014 381 0 Clear the set with any new PCS;
#X text 1889 446 1 Send the original PCS;
#X text 1901 492 2 Create the inverted PCS;
#X text 1845 624 3 Loop through the PCS to rotate (1234 to 4123 to 3412 to 2341);
#X text 1517 742 4 Find the most compact form between all the rotations of the PCS and its inverted form;
#X text 1556 802 4a Loop through the PCS to get each rotation;
#X text 1632 888 4b Get the spread of intervals for each rotation, f 29;
#X text 1605 998 4c Collect the interval spread and find the smallest value on each inversion, f 37;
#X text 1713 1157 4d Using the index \, retrieve the most compact rotation from each inversion, f 24;
#X text 1727 1252 4e Synchronize and compare the interval spreads from the most compact rotation from both inversions, f 28;
#X text 1799 1475 4f Send the most compact form between the two inversions, f 43;
#X text 2289 717 5 Get the prime form from the most compact form of the PCS (either inversion);
#X text 2315 760 5a Transpose to 0 (C);
#X text 2310 806 5b Change 10 to T and 11 to E;
#X text 2318 862 5c Eliminate spaces;
#X text 2319 904 5d Put the string in parentheses;
#X obj 800 301 note 131 24 Inter empty 0 55 55 55 0 228 228 228 0 0 Transposed to 0 (C);
#X obj 7 169 note 125 20 Inter empty 0 55 55 55 0 228 228 228 0 0 Original;
#X obj 163 180 note 146 20 Inter empty 0 55 55 55 0 228 228 228 0 0 Normal Form;
#X obj 315 178 note 146 20 Inter empty 0 55 55 55 0 228 228 228 0 0 Inversion;
#X obj 621 179 note 148 18 Inter empty 0 55 55 55 0 228 228 228 0 0 Most Compact;
#X obj 471 180 note 148 18 Inter empty 0 55 55 55 0 228 228 228 0 0 Compact Inversion;
#X obj 493 475 note 229 24 Inter empty 0 55 55 55 0 228 228 228 0 0 Prime Form;
#X obj 277 569 r \$0-prime;
#X obj 511 520 note 337 49 Inter \$0-prime-set 0 55 55 55 0 228 228 228 0 0 (013568T);
#X msg 440 610 receive \\\$0-prime-set;
#X obj 391 573 s \$0-prime-set;
#X obj 277 595 prepend set;
#N canvas 0 22 450 300 invertspread 0;
#X obj 627 796 list length;
#X obj 395 941 t l b;
#X obj 422 998 * 12;
#X obj 396 1043 +;
#X text 119 960 3 Add an extra octave each time (+12 for the second item \, +24 for the third \, etc.), f 44;
#X obj 384 472 inlet PCS;
#X obj 411 1231 zl stream;
#X obj 535 894 - 1;
#X msg 528 927 max \$1;
#X msg 476 926 down;
#X obj 619 830 t b f f;
#X obj 396 857 iterate -1;
#X obj 507 978 counter 0 0 12;
#X msg 293 552 1 4 5 6 7 10;
#X obj 406 1086 -;
#X obj 439 769 t l l l;
#X obj 450 825 zl slice 1;
#X obj 406 1124 % 12;
#X obj 386 1157 makefilename %02d;
#X obj 411 1286 unite empty;
#X obj 231 472 inlet Rotation Number;
#X obj 437 695 rotate;
#X text 527 734 1 Rotate the Pitch Class Set;
#X text 461 1086 4 Subtract from the first item;
#X text 466 1123 5 Get the interval class;
#X text 487 1179 6 Add a leading 0;
#X text 491 1231 4 Collect these interval classes;
#X text 503 1284 5 Strip the spaces;
#X obj 411 1499 outlet Set of interval classes;
#X text 100 860 2 Go over each item \, from the end to the beginning, f 47;
#X msg 223 601 0 4 7 10;
#X obj 472 600 t b f;
#X msg 516 561 2;
#X obj 392 643 list store;
#X obj 411 1377 makefilename %s;
#X obj 411 1415 symbol \$1;
#X obj 411 1444 f;
#X text 549 1415 6 Make into a float;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 1 1 12 0 32.................F....TF...fA....kA...HA....;
#X connect 2 0 3 1 32.................M....H++++eC....x++++qA....;
#X connect 3 0 14 0;
#X connect 5 0 33 1;
#X connect 6 0 19 0;
#X connect 7 0 8 0 32.................G....n+++++A....5++++6.....;
#X connect 8 0 12 0 32.................P....v9+++OD....r++++CB....;
#X connect 9 0 12 0 32.................Q....7A...PD....e....DB....;
#X connect 10 0 9 0 32.................b....P0+++OG....T8+++WE....;
#X connect 10 1 7 0 32.................p....D3+++uJ....A9+++WC....;
#X connect 10 2 6 1 32.................oE...vy+++eZA...77+++6W....;
#X connect 11 0 1 0;
#X connect 12 0 2 0 32.................A....v5+++e.....r9+++G.....;
#X connect 13 0 33 1;
#X connect 14 0 17 0;
#X connect 15 0 11 0;
#X connect 15 1 16 0;
#X connect 15 2 0 0 32.................C....7I...v.....eB...f.....;
#X connect 16 0 14 1 32.................lC....9+++u4....f++++KO....;
#X connect 17 0 18 0;
#X connect 18 0 6 0;
#X connect 19 0 34 0;
#X connect 20 0 31 0 32.................d.....P...fG.....D...vC....;
#X connect 21 0 15 0;
#X connect 30 0 33 1;
#X connect 31 0 33 0;
#X connect 31 1 21 1;
#X connect 32 0 31 0;
#X connect 33 0 21 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 36 0 28 0;
#X restore 1491 921 pd invertspread;
#N canvas 0 22 450 300 intervalspread 0;
#X obj 1456 555 list length;
#X obj 1224 700 t l b;
#X obj 1251 757 * 12;
#X obj 1225 802 +;
#X text 948 719 3 Add an extra octave each time (+12 for the second item \, +24 for the third \, etc.), f 44;
#X obj 1213 231 inlet PCS;
#X obj 1240 990 zl stream;
#X obj 1364 653 - 1;
#X msg 1357 686 max \$1;
#X msg 1305 685 down;
#X obj 1448 589 t b f f;
#X obj 1225 616 iterate -1;
#X obj 1336 737 counter 0 0 12;
#X msg 1122 311 1 4 5 6 7 10;
#X obj 1235 845 -;
#X obj 1268 528 t l l l;
#X obj 1279 584 zl slice 1;
#X obj 1235 883 % 12;
#X obj 1215 916 makefilename %02d;
#X obj 1237 1045 unite empty;
#X obj 1060 231 inlet Rotation Number;
#X obj 1266 454 rotate;
#X text 1356 493 1 Rotate the Pitch Class Set;
#X text 1290 845 4 Subtract from the first item;
#X text 1295 882 5 Get the interval class;
#X text 1316 938 6 Add a leading 0;
#X text 1320 990 4 Collect these interval classes;
#X text 1329 1043 5 Strip the spaces;
#X obj 1238 1340 outlet Set of interval classes;
#X text 929 619 2 Go over each item \, from the end to the beginning, f 47;
#X msg 1052 360 0 4 7 10;
#X obj 1301 359 t b f;
#X msg 1345 320 2;
#X obj 1221 402 list store;
#X obj 1240 1143 makefilename %s;
#X obj 1240 1181 symbol \$1;
#X obj 1240 1210 f;
#X text 1378 1181 6 Make into a float;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 1 1 12 0 32.................F....TF...fA....kA...HA....;
#X connect 2 0 3 1 32.................M....H++++eC....x++++qA....;
#X connect 3 0 14 0;
#X connect 5 0 33 1;
#X connect 6 0 19 0;
#X connect 7 0 8 0 32.................G....n+++++A....5++++6.....;
#X connect 8 0 12 0 32.................P....v9+++OD....r++++CB....;
#X connect 9 0 12 0 32.................Q....7A...PD....e....DB....;
#X connect 10 0 9 0 32.................b....P0+++OG....T8+++WE....;
#X connect 10 1 7 0 32.................p....D3+++uJ....A9+++WC....;
#X connect 10 2 6 1 32.................oE...vy+++eZA...77+++6W....;
#X connect 11 0 1 0;
#X connect 12 0 2 0 32.................A....v5+++e.....r9+++G.....;
#X connect 13 0 33 1;
#X connect 14 0 17 0;
#X connect 15 0 11 0;
#X connect 15 1 16 0;
#X connect 15 2 0 0 32.................C....7I...v.....eB...f.....;
#X connect 16 0 14 1 32.................lC....9+++u4....f++++KO....;
#X connect 17 0 18 0;
#X connect 18 0 6 0;
#X connect 19 0 34 0;
#X connect 20 0 31 0 32.................d.....P...fG.....D...vC....;
#X connect 21 0 15 0;
#X connect 30 0 33 1;
#X connect 31 0 33 0;
#X connect 31 1 21 1;
#X connect 32 0 31 0;
#X connect 33 0 21 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 36 0 28 0;
#X restore 1773 930 pd intervalspread;
#X obj 1809 317 r \$0-upcs;
#X obj 104 648 s \$0-upcs;
#X listbox 19 487 77 0 0 0 - - - 36;
#X obj 67 609 list;
#N canvas 0 22 450 300 pcs2root 0;
#X obj 964 558 iterate;
#X obj 965 599 + 12;
#X obj 965 625 -;
#X obj 965 653 % 12;
#X obj 965 677 zl stream;
#X obj 965 500 t l l;
#X obj 1101 580 list length;
#X obj 1022 577 zl slice 1;
#X obj 965 464 inlet;
#X obj 965 752 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 0 0;
#X connect 5 1 7 0;
#X connect 5 1 6 0;
#X connect 6 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 5 0;
#X restore 641 271 pd pcs2root;
#N canvas 0 22 450 300 pcs2root 0;
#X obj 964 558 iterate;
#X obj 965 599 + 12;
#X obj 965 625 -;
#X obj 965 653 % 12;
#X obj 965 677 zl stream;
#X obj 965 500 t l l;
#X obj 1101 580 list length;
#X obj 1022 577 zl slice 1;
#X obj 965 464 inlet;
#X obj 965 752 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 0 0;
#X connect 5 1 7 0;
#X connect 5 1 6 0;
#X connect 6 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 5 0;
#X restore 490 270 pd pcs2root;
#N canvas 0 22 450 300 pcs2root 0;
#X obj 964 558 iterate;
#X obj 965 599 + 12;
#X obj 965 625 -;
#X obj 965 653 % 12;
#X obj 965 677 zl stream;
#X obj 965 500 t l l;
#X obj 1101 580 list length;
#X obj 1022 577 zl slice 1;
#X obj 965 464 inlet;
#X obj 965 752 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 0 0;
#X connect 5 1 7 0;
#X connect 5 1 6 0;
#X connect 6 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 5 0;
#X restore 338 273 pd pcs2root;
#N canvas 0 22 450 300 pcs2root 0;
#X obj 964 558 iterate;
#X obj 965 599 + 12;
#X obj 965 625 -;
#X obj 965 653 % 12;
#X obj 965 677 zl stream;
#X obj 965 500 t l l;
#X obj 1101 580 list length;
#X obj 1022 577 zl slice 1;
#X obj 965 464 inlet;
#X obj 965 752 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 0 0;
#X connect 5 1 7 0;
#X connect 5 1 6 0;
#X connect 6 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 5 0;
#X restore 188 274 pd pcs2root;
#N canvas 0 22 450 300 pcs2root 0;
#X obj 964 558 iterate;
#X obj 965 599 + 12;
#X obj 965 625 -;
#X obj 965 653 % 12;
#X obj 965 677 zl stream;
#X obj 965 500 t l l;
#X obj 1101 580 list length;
#X obj 1022 577 zl slice 1;
#X obj 965 464 inlet;
#X obj 965 752 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 0 0;
#X connect 5 1 7 0;
#X connect 5 1 6 0;
#X connect 6 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 5 0;
#X restore 27 274 pd pcs2root;
#X connect 2 0 14 0;
#X connect 5 0 9 0;
#X connect 6 0 49 0;
#X connect 7 0 37 0;
#X connect 8 0 14 0;
#X connect 9 0 7 0;
#X connect 10 0 14 0;
#X connect 11 0 19 0;
#X connect 11 0 53 1 32.................jC...L0+++O4....S8+++yN....;
#X connect 12 0 11 0 32.................K....PE...vB....TA...rA....;
#X connect 13 0 14 0;
#X connect 14 0 5 0;
#X connect 14 2 7 2;
#X connect 14 3 17 0;
#X connect 14 4 15 0 32.................J....DG...fB....wA...T++++O;
#X connect 16 0 4 0;
#X connect 18 0 4 0;
#X connect 21 0 20 0;
#X connect 22 0 20 0;
#X connect 23 0 14 0;
#X connect 24 0 31 0;
#X connect 24 0 121 1 32.................V....z++++uE....8++++yB....;
#X connect 25 0 32 0;
#X connect 27 0 26 0;
#X connect 29 0 26 0;
#X connect 30 0 15 0;
#X connect 31 0 6 1;
#X connect 32 0 28 0;
#X connect 33 0 12 0 32.................M....X4+++eC....V9+++6C....;
#X connect 33 1 11 1;
#X connect 35 0 34 0;
#X connect 36 0 34 0;
#X connect 38 0 121 0;
#X connect 39 0 48 0;
#X connect 40 0 47 0;
#X connect 40 0 53 0 32.................qC...LI...v5....SB...PO....;
#X connect 41 0 40 0;
#X connect 42 0 39 1 32.................I....37+++eB....N++++KA....;
#X connect 43 0 41 0;
#X connect 43 1 40 1;
#X connect 44 0 120 0;
#X connect 45 0 42 0;
#X connect 45 0 120 1;
#X connect 46 0 41 1;
#X connect 48 0 50 0 32.................N....XJ...fC....lB...vA....;
#X connect 48 1 43 0;
#X connect 49 0 50 1 32.................O....b1++++C....m8+++6A....;
#X connect 49 1 33 0;
#X connect 50 0 51 0;
#X connect 50 1 51 1;
#X connect 51 0 52 0;
#X connect 52 0 56 0;
#X connect 52 1 57 0;
#X connect 53 0 54 1 32.................M....j9+++eC....o++++eA....;
#X connect 53 1 55 1 32.................G....7D...vA....OA...PA....;
#X connect 54 0 58 0 32.................T....nC....E....5....fB....;
#X connect 55 0 58 0 32.................R....36+++uD....99+++OB....;
#X connect 56 0 54 0 32.................F....b7+++uA....G++++6E....;
#X connect 57 0 55 0 32.................J....nB...fB....p....XE....;
#X connect 60 0 59 0;
#X connect 61 0 59 0;
#X connect 62 0 12 1;
#X connect 63 0 14 0;
#X connect 65 0 64 0;
#X connect 66 0 130 0;
#X connect 68 0 67 0;
#X connect 69 0 129 0;
#X connect 71 0 70 0;
#X connect 72 0 128 0;
#X connect 74 0 73 0;
#X connect 75 0 127 0;
#X connect 77 0 76 0;
#X connect 78 0 79 0;
#X connect 79 0 89 0;
#X connect 81 0 126 0;
#X connect 82 0 83 0;
#X connect 83 0 80 0;
#X connect 84 0 14 0;
#X connect 85 0 14 0;
#X connect 89 0 82 0;
#X connect 90 0 14 0;
#X connect 91 0 14 0;
#X connect 115 0 119 0;
#X connect 117 0 116 0;
#X connect 119 0 118 0;
#X connect 120 0 39 0;
#X connect 121 0 6 0 32.................P....zC....D....8.....B....;
#X connect 122 0 14 0;
#X connect 124 0 125 0;
#X connect 125 0 123 0;
#X connect 126 0 76 0;
#X connect 127 0 73 0;
#X connect 128 0 70 0;
#X connect 129 0 67 0;
#X connect 130 0 64 0;
